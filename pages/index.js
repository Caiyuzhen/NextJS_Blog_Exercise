import Head from 'next/head'
import Image from 'next/image'
import styles from '../styles/Home.module.css'
import {GraphQLClient, gql} from 'graphql-request'
import Menu from './components/menu'
import BlogHeader from './components/blogHeader'
import BlogContainer from './components/blogContainer'
import Article from './components/article'


// åœ°å€å¡«å…¥è¦è°ƒç”¨çš„ api åœ°å€
const client = new GraphQLClient('https://api-ap-northeast-1.hygraph.com/v2/cl88xvy281qi801tafuguf6v4/master')
const QUERY = gql`
	{
		posts{
			id,
			title,
			category,
			datePublished,
			description,
			content{
			  html
			},
			readTime,
			author{
			  name,
			  avatar{
				url
			  }
			},
			cover{
			  url
			}
		  }
	}
`

//ğŸ‘‡ Nex.js å¸®æˆ‘ä»¬å®šä¹‰å¥½çš„å‡½æ•°ï¼Œç”¨äºè·å–æ•°æ®
export async function getStaticProps(){
	//ã€è§£æ„èµ‹å€¼ç»™ã€‘ä¸Šé¢çš„ã€è¯·æ±‚æ•°æ®ç»“æ„ã€‘
	const {posts} = await client.request(QUERY)

	return{
		props:{
			posts,//æŠŠ props æ•°æ®ä¼ é€’è¿›æ¥
		}
	}
}



export default function Home({posts}) {

console.log('posts',posts);

  return (
    <div className={styles.container}>
      <Head>
        <title> Zen Blog </title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

	  {/* ğŸŒŸ å†…å®¹åˆ†åŒº */}
	  <div className="blog">
			{/* ğŸŒŸ å·¦ä¾§èœå• */}
			<Menu />

			{/* ğŸŒŸ é¡¶éƒ¨æ ‡é¢˜ */}
			<BlogHeader />

		 	{/* ğŸŒŸã€åšå®¢å†…å®¹ã€‘:ã€æ•°æ®å›å¡«ã€‘: å¡«å…¥åç«¯è¿”å›çš„æ•°æ®(posts å˜é‡) å¹¶ä¼ é€’ç»™ã€å­ç»„ä»¶ã€‘*/}
			<BlogContainer posts={posts}/>

			{/* ğŸŒŸ å³ä¾§åˆ—è¡¨ */}
			<Article />

	  </div>
    </div>
  )
}
